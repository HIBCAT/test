<!DOCTYPE html>
<html>
<head>
    <title>IBHI-Demo Visuals</title>
    <meta charset="utf-8"/>

    <script src="https://cdn.jsdelivr.net/npm/vega@5.17.0"></script>
    <script src="https://cdn.jsdelivr.net/npm/vega-lite@4.17.0"></script>
    <script src="https://cdn.jsdelivr.net/npm/vega-embed@6.12.2"></script>
        <script src="https://cdn.jsdelivr.net/npm/vega@5.20.2"></script>
    <script src="https://cdn.jsdelivr.net/npm/vega-lite@5.1.0"></script>
    <script src="https://cdn.jsdelivr.net/npm/vega-embed@6.17.0"></script>


    <style media="screen">
        /* Add space between Vega-Embed links  */
        .vega-actions a {
            margin-right: 5px;
        }
    </style>
</head>
<body>
<!-- Container for the visualization -->
<div id="vis1"></div>


<script>
    // Assign the specification to a local variable vlSpec.

    var vlSpec1 = {
  "$schema": "https://vega.github.io/schema/vega-lite/v4.json",
  "data": {
    "url": "https://raw.githubusercontent.com/HIBCAT/test/main/test_data/feature_4_may_04.csv"
  },
                                "title": {"text": "Daily AD Investment Required To Overcome the Negative Sentiment Against the Brand ", "fontSize": 15, "anchor": "middle"},

  "transform": [{"window": [{"op": "row_number", "as": "row_number"}]}],
  "vconcat": [
      {
        "hconcat": [

    {
      "mark": {"type": "bar", "size": 150},
      "title": "Brands (Select One)",
      "encoding": {
                            "color": {
                                "condition": {
                                    "type": "nominal",
                                    "field": "brand",
                                    "legend": null,
                                    "selection": "brand_legend"
                                },
                                "value": "lightgray"
                            },
                            "y": {
                                "type": "nominal", "field":
                                    "brand", "title": null
                            }
                        },
      "selection": {
                            "brand_legend": {
                                "type": "multi",
                                "encodings": ["color"],
                                "on": "click",
                                "toggle": "event.shiftKey",
                                "resolve": "global",
                                "empty": "all"
                            }
                        }
      },

    {
      "layer": [
        {
          "width": 1320,
          "height": 100,
          "mark": {
            "type": "line",
            "strokeWidth": 1.5,
            "tooltip": true,
            "color": "#000080"
          },
          "transform": [
            {"filter": {"selection": "brand_legend"}}

          ],
          "selection": {
            "brush": {"type": "interval", "encodings": ["x"]},
            "brand_legend": {
                                "type": "multi",
                                "encodings": ["color"],
                                "on": "click",
                                "toggle": "event.shiftKey",
                                "resolve": "global",
                                "empty": "all"
                            }
            },
          "encoding": {
            "x": {
              "field": "date",
              "type": "temporal",
              "title": "       Daily Social Media Posts"
            },
            "y": {
				"title": "Volume",
              "field": "bw_volume",
              "type": "quantitative",
              "axis": {"tickCount": 3, "grid": false}
            }
          }
        }
      ]
      }




        ]
      },

	  {
		  "layer": [

			      {
      "layer": [

		        {
          "width": 1500,
          "height": 200,
          "mark": {
            "type": "line",
            "strokeWidth": 1.5,
            "tooltip": true,
            "color": "#008000"
          },
          "transform": [
            {"filter": {"selection": "brand_legend"}},
			{"filter": {"selection": "brush"}}

          ],

          "encoding": {
            "x": {
              "field": "date",
              "type": "temporal",
              "title": "       Post Type | Green: Positive | Grey: Neutral | Red: Negative "
            },
            "y": {
              "field": "bw_positive",
			  "title": null,
              "type": "quantitative",
              "axis": {"tickCount": 3, "grid": false}
            }
          }
        },

				        {
          "width": 1500,
          "height": 200,
          "mark": {
            "type": "line",
            "strokeWidth": 1.5,
            "tooltip": true,
            "color": "#DC143C"
          },
          "transform": [
            {"filter": {"selection": "brand_legend"}},
			{"filter": {"selection": "brush"}}

          ],

          "encoding": {
            "x": {
              "field": "date",
              "type": "temporal",
              "title": "       Post Type | Green: Positive | Grey: Neutral | Red: Negative "
            },
            "y": {
              "field": "bw_negative",
			  "title": null,
              "type": "quantitative",
              "axis": {"tickCount": 3, "grid": false}
            }
          }
        },
						        {
          "width": 1500,
          "height": 200,
          "mark": {
            "type": "line",
            "strokeWidth": 1.5,
            "tooltip": true,
            "color": "#95A5A6"
          },
          "transform": [
            {"filter": {"selection": "brand_legend"}},
			{"filter": {"selection": "brush"}}

          ],

          "encoding": {
            "x": {
              "field": "date",
              "type": "temporal",
              "title": "       Post Type | Green: Positive | Grey: Neutral | Red: Negative "
            },
            "y": {
              "field": "bw_neutral",
			  "title": null,
              "type": "quantitative",
              "axis": {"tickCount": 3, "grid": false}
            }
          }
        }
      ]
      }

		  ]
	  }	,

	    {
          "width": 1500,
          "height": 400,
          "mark": {
            "type": "line",
            "strokeWidth": 1.5,
            "tooltip": true,
            "color": "#000080"
          },
          "transform": [
            {"filter": {"selection": "brand_legend"}},
			{"filter": {"selection": "brush"}}

          ],
          "encoding": {
            "x": {
              "field": "date",
              "type": "temporal",
              "title": "       Daily Promotional Investment To Overcome Negative Sentiment"
            },
            "y": {

              "field": "investment_estimate",
			  "title": "Daily AD Investment in USD",
              "type": "quantitative",
              "axis": {"tickCount": 3, "grid": false}
            }
          }
        }
  ]
};



    // Embed the visualization in the container with id `vis`
    vegaEmbed('#vis1', vlSpec1, {'actions': true});


</script>
</body>
</html>
